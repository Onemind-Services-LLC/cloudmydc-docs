"use strict";(self.webpackChunkcloudmydc_docs=self.webpackChunkcloudmydc_docs||[]).push([[5558],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>f});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),s=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=s(e.components);return r.createElement(c.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),p=s(n),m=a,f=p["".concat(c,".").concat(m)]||p[m]||u[m]||o;return n?r.createElement(f,i(i({ref:t},d),{},{components:n})):r.createElement(f,i({ref:t},d))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=m;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[p]="string"==typeof e?e:a,i[1]=l;for(var s=2;s<o;s++)i[s]=n[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},79745:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var r=n(87462),a=(n(67294),n(3905));const o={sidebar_position:7},i=void 0,l={unversionedId:"Load Balancers/NGINX/NGINX ModSecurity",id:"Load Balancers/NGINX/NGINX ModSecurity",title:"NGINX ModSecurity",description:"How to Enable ModSecurity Web Application Firewall inside NGINX Server",source:"@site/docs/Load Balancers/NGINX/NGINX ModSecurity.md",sourceDirName:"Load Balancers/NGINX",slug:"/Load Balancers/NGINX/NGINX ModSecurity",permalink:"/docs/Load Balancers/NGINX/NGINX ModSecurity",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Load Balancers/NGINX/NGINX ModSecurity.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7},sidebar:"tutorialSidebar",previous:{title:"App Security with NGINX Balancer",permalink:"/docs/Load Balancers/NGINX/App Security with NGINX Balancer"},next:{title:"LiteSpeed Web ADC",permalink:"/docs/Load Balancers/LiteSpeed Web ADC"}},c={},s=[{value:"How to Enable ModSecurity Web Application Firewall inside NGINX Server",id:"how-to-enable-modsecurity-web-application-firewall-inside-nginx-server",level:2}],d={toc:s},p="wrapper";function u(e){let{components:t,...o}=e;return(0,a.kt)(p,(0,r.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"how-to-enable-modsecurity-web-application-firewall-inside-nginx-server"},"How to Enable ModSecurity Web Application Firewall inside NGINX Server"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},(0,a.kt)("a",{parentName:"strong",href:"https://cloudmydc.com/"},"ModSecurity"))," is an open-source, cross-platform web application firewall (WAF) module that helps to detect and prevent various attacks against web applications. The module can block common code injection attacks that ensures higher level of server security. It comes with a set of rules for cross website scripting, SQL injection, bad user agents, session hijacking, trojans, and other exploits."),(0,a.kt)("p",null,"Jelastic certified NGINX stacks (application servers and load balancer) are provided with the already pre-built ModSecurity module. You can follow just a few steps to enable this functionality on your containers:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Load the ModSecurity shared NGINX module by uncommenting the next line in the ",(0,a.kt)("strong",{parentName:"li"},"/etc/nginx/nginx.conf")," file:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"#load_module modules/ngx_http_modsecurity_module.so;\n")),(0,a.kt)("div",{style:{display:"flex",justifyContent:"center",margin:"0 0 1rem 0"}},(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Locale Dropdown",src:n(74544).Z,width:"952",height:"350"}))),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Save")," the changes to the file."),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"Next, enable the ModSecurity functionality by uncommenting the following lines in the same ",(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("em",{parentName:"strong"},"/etc/nginx/nginx.conf"))," config for the NGINX application server stack (or ",(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("em",{parentName:"strong"},"/etc/nginx/nginx-jelastic.conf"))," for the load balancer, like in our case).")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"#modsecurity on;\n#modsecurity_rules_file /etc/nginx/conf.d/modsecurity/modsec_includes.conf;\n")),(0,a.kt)("div",{style:{display:"flex",justifyContent:"center",margin:"0 0 1rem 0"}},(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Locale Dropdown",src:n(77086).Z,width:"1020",height:"342"}))),(0,a.kt)("admonition",{title:"Tip",type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"You can use the ",(0,a.kt)("strong",{parentName:"p"},"Search")," field to quickly locate the required strings.")),(0,a.kt)("p",null,"Don\u2019t forget to Save the file after adjustments."),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"According to the ",(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("em",{parentName:"strong"},"/etc/nginx/conf.d/modsecurity/modsec_includes.conf"))," config, an ",(0,a.kt)("em",{parentName:"li"},(0,a.kt)("a",{parentName:"em",href:"https://cloudmydc.com/"},"OWASP ModSecurity Core Rule Set (CRS)"))," is included by default (provides generic protection from unknown vulnerabilities often found in web applications).")),(0,a.kt)("div",{style:{display:"flex",justifyContent:"center",margin:"0 0 1rem 0"}},(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Locale Dropdown",src:n(53773).Z,width:"1020",height:"245"}))),(0,a.kt)("p",null,"Also, if needed, you can upload your custom rules as ",(0,a.kt)("b",null,(0,a.kt)("i",null,"*",".conf"))," files to the ",(0,a.kt)("strong",{parentName:"p"},"/etc/nginx/conf.d/modsecurity/owasp-modsecurity-crs/rules")," folder."),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},"Restart the appropriate NGINX node to apply all of the performed customizations.")),(0,a.kt)("div",{style:{display:"flex",justifyContent:"center",margin:"0 0 1rem 0"}},(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Locale Dropdown",src:n(98607).Z,width:"763",height:"160"}))),(0,a.kt)("p",null,"Now, your application is protected with ModSecurity."),(0,a.kt)("ol",{start:5},(0,a.kt)("li",{parentName:"ol"},"You can verify that it is loaded by executing the ",(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("em",{parentName:"strong"},"nginx -V"))," command on the node (e.g. via ",(0,a.kt)("a",{parentName:"li",href:"https://cloudmydc.com/"},"Web SSH"),") and looking for the ModSecurity module in the list.")),(0,a.kt)("div",{style:{display:"flex",justifyContent:"center",margin:"0 0 1rem 0"}},(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Locale Dropdown",src:n(59004).Z,width:"941",height:"482"}))),(0,a.kt)("ol",{start:6},(0,a.kt)("li",{parentName:"ol"},"The operability of the ModSecurity can be checked by simulating an attack on your application. For example, try adding the ",(0,a.kt)("strong",{parentName:"li"},'/?q=">',(0,a.kt)("script",null,"alert(1)"))," string to your environment domain. If the module works as intended, the ",(0,a.kt)("strong",{parentName:"li"},"403 error page")," should be displayed, and the appropriate action ",(0,a.kt)("a",{parentName:"li",href:"https://cloudmydc.com/"},"logged")," to the error log file:")),(0,a.kt)("div",{style:{display:"flex",justifyContent:"center",margin:"0 0 1rem 0"}},(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Locale Dropdown",src:n(6484).Z,width:"941",height:"505"}))),(0,a.kt)("p",null,"As you can see, the ModSecurity is up and working to keep your web application secure."),(0,a.kt)("p",null,"Start free trial and ensure high-level protection while running your projects with ",(0,a.kt)("a",{parentName:"p",href:"https://cloudmydc.com/"},"Jelastic Multi-Cloud PaaS"),"."))}u.isMDXComponent=!0},77086:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/enable-modsecurity-nginx-waf-92631a9d6004b4ea8b64ad80ab9062c2.png"},74544:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/modsecurity-nginx-waf-configuration-516d640e111fb47cc213023c05de3016.png"},6484:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/modsecurity-nginx-waf-log-cc744d0833467f725656b1b2c559f407.png"},98607:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/modsecurity-nginx-waf-restart-a6d2a0a3a0f1e1eb45168066a068ed29.png"},53773:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/modsecurity-nginx-waf-rules-064ab498c76838afb72212e64a5da951.png"},59004:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/modsecurity-nginx-waf-web-ssh-67a1f23b8c9c3a2944afcb2c1d45bf11.png"}}]);