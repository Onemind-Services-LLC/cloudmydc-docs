"use strict";(self.webpackChunkcloudmydc_docs=self.webpackChunkcloudmydc_docs||[]).push([[4253],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},d="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(n),u=o,m=d["".concat(l,".").concat(u)]||d[u]||h[u]||i;return n?a.createElement(m,r(r({ref:t},p),{},{components:n})):a.createElement(m,r({ref:t},p))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:o,r[1]=s;for(var c=2;c<i;c++)r[c]=n[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},47783:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var a=n(87462),o=(n(67294),n(3905));const i={sidebar_position:6},r=void 0,s={unversionedId:"Load Balancers/NGINX/App Security with NGINX Balancer",id:"Load Balancers/NGINX/App Security with NGINX Balancer",title:"App Security with NGINX Balancer",description:"Basic Security for Applications with NGINX Balancer",source:"@site/docs/Load Balancers/NGINX/App Security with NGINX Balancer.md",sourceDirName:"Load Balancers/NGINX",slug:"/Load Balancers/NGINX/App Security with NGINX Balancer",permalink:"/docs/Load Balancers/NGINX/App Security with NGINX Balancer",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Load Balancers/NGINX/App Security with NGINX Balancer.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"Caching in NGINX Balancer",permalink:"/docs/Load Balancers/NGINX/Caching in NGINX Balancer"},next:{title:"NGINX ModSecurity",permalink:"/docs/Load Balancers/NGINX/NGINX ModSecurity"}},l={},c=[{value:"Basic Security for Applications with NGINX Balancer",id:"basic-security-for-applications-with-nginx-balancer",level:2},{value:"Authentication",id:"authentication",level:2},{value:"IP Address Deny",id:"ip-address-deny",level:2},{value:"Methods Combination",id:"methods-combination",level:2}],p={toc:c},d="wrapper";function h(e){let{components:t,...i}=e;return(0,o.kt)(d,(0,a.Z)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"basic-security-for-applications-with-nginx-balancer"},"Basic Security for Applications with NGINX Balancer"),(0,o.kt)("div",{style:{display:"grid",gridTemplateColumns:"0.15fr 1fr",gap:"10px"}},(0,o.kt)("div",null,(0,o.kt)("div",{style:{display:"flex",alignItems:"center",justifyContent:"cetner"}},(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Locale Dropdown",src:n(38019).Z,width:"258",height:"178"})))),(0,o.kt)("div",null,(0,o.kt)("p",null,"As the amount of information shared through the internet is growing from year to year, as well as adoption of the Web as a mean for doing business, the protection of websites and web applications becomes one of the major Internet security issues. The obvious response to this is implementation of plenty of prevention tools. But before rushing to integrate some complex and/or costly protection solution, consider a few common security methods, as sometimes the most basic security becomes the most efficient one."))),(0,o.kt)("p",null,"So, in this guide we\u2019ll show you how to set a couple of simple protection mechanisms, that are available for any application that uses ",(0,o.kt)("strong",{parentName:"p"},"NGINX balancer")," as a frontend, and which applying doesn\u2019t require any additional costs."),(0,o.kt)("p",null,"Primarily the NGINX load balancer server is intended for performing the smart requests distribution between multiple application server nodes and thus ensuring high system availability and reliability. Herewith, it can be used for processing both HTTP and TCP traffic types (details can be found within the ",(0,o.kt)("a",{parentName:"p",href:"https://cloudmydc.com/"},"HTTP Load Balancing")," and ",(0,o.kt)("a",{parentName:"p",href:"https://cloudmydc.com/"},"TCP Load Balancing")," docs)."),(0,o.kt)("p",null,"Load balancing node is automatically added to an environment if you pick up more than one application server node, and in addition, it can be added manually even for a single server. To do this, just select the Balancing wizard block above the chosen application server in the ",(0,o.kt)("strong",{parentName:"p"},"Environment Topology")," window."),(0,o.kt)("div",{style:{display:"flex",justifyContent:"center",margin:"0 0 1rem 0"}},(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Locale Dropdown",src:n(94963).Z,width:"976",height:"505"}))),(0,o.kt)("p",null,"Now when the environment is ready, you can proceed to configuring the desired protection method using the instructions below:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://cloudmydc.com/"},"Authentication")," makes application access protected with a password"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://cloudmydc.com/"},"IP Address Deny")," mechanism is used to forbid application access from a particular IP\nWe\u2019ll also pay the attention to the way of ",(0,o.kt)("a",{parentName:"li",href:"https://cloudmydc.com/"},"combining")," the abovementioned methods for being used simultaneously. So, let\u2019s find out how to implement this to your environment. Here we go!")),(0,o.kt)("h2",{id:"authentication"},"Authentication"),(0,o.kt)("p",null,"Authentication is a simple but powerful method to restrict application axccess and ensure that an unauthorised entity won\u2019t be able to cause any harm to it. In this example, we\u2019ll show you how to set up username/password protection."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Obviously the password information can not be stored in an open form, so it needs to be protected itself. For that you need to generate a hash, based on the desired username and password using any htpasswd tool or one of the similar online services (for example, ",(0,o.kt)("a",{parentName:"p",href:"https://cloudmydc.com/"},"http://www.htpasswdgenerator.net/"),").")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Save the character sequence you\u2019ve received and switch back to the platform dashboard with your environment listed. There click the ",(0,o.kt)("strong",{parentName:"p"},"Config")," button for the ",(0,o.kt)("strong",{parentName:"p"},"NGINX balancer")," node."))),(0,o.kt)("div",{style:{display:"flex",justifyContent:"center",margin:"0 0 1rem 0"}},(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Locale Dropdown",src:n(54620).Z,width:"801",height:"143"}))),(0,o.kt)("ol",{start:3},(0,o.kt)("li",{parentName:"ol"},"You\u2019ll see the ",(0,o.kt)("strong",{parentName:"li"},"Configuration Manager")," tab opened, wherein you need to create a ",(0,o.kt)("strong",{parentName:"li"},"New file")," (using the same-named button at the tools panel) inside the ",(0,o.kt)("strong",{parentName:"li"},"conf.d")," folder. Set any desired name for it but obligatory with the ",(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("em",{parentName:"strong"},".htpasswd"))," extension (e.g. password.htpasswd).")),(0,o.kt)("div",{style:{display:"flex",justifyContent:"center",margin:"0 0 1rem 0"}},(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Locale Dropdown",src:n(36694).Z,width:"581",height:"343"}))),(0,o.kt)("ol",{start:4},(0,o.kt)("li",{parentName:"ol"},"After this is done, paste the hash that you\u2019ve received at the first instruction step to the file\u2019s content. Remember that you can add as many accounts as you need (just don\u2019t forget to place every next one from a new line).")),(0,o.kt)("div",{style:{display:"flex",justifyContent:"center",margin:"0 0 1rem 0"}},(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Locale Dropdown",src:n(27334).Z,width:"670",height:"352"}))),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Save")," the changes when all the settings are done."),(0,o.kt)("ol",{start:5},(0,o.kt)("li",{parentName:"ol"},"Then choose the ",(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("em",{parentName:"strong"},"nginx-jelastic.conf"))," file inside the ",(0,o.kt)("strong",{parentName:"li"},"conf")," folder and find the location block in the first server code section. Paste there the following lines in order to enable the authentication and apply the appropriate access rules:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'auth_basic           "closed site";\nauth_basic_user_file /etc/nginx/conf.d/{htpasswd_file};\n')),(0,o.kt)("p",null,"where ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("em",{parentName:"strong"},"{htpasswd_file}"))," - name of the file you\u2019ve inserted the hash with password(s) to (in our case this file is ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("em",{parentName:"strong"},"password.htpasswd")),")."),(0,o.kt)("div",{style:{display:"flex",justifyContent:"center",margin:"0 0 1rem 0"}},(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Locale Dropdown",src:n(40982).Z,width:"1104",height:"283"}))),(0,o.kt)("admonition",{title:"Note",type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"that usually we recommend to modify the configurations in the ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("em",{parentName:"strong"},"nginx.conf"))," file and keep the ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("em",{parentName:"strong"},"nginx-jelastic.conf"))," one\u2019s content as the default/backup settings. But in this case, since the required changes are rather simple and we are pretty sure that we know what we are doing, it will be easier to work directly with the ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("em",{parentName:"strong"},"nginx-jelastic"))," file.")),(0,o.kt)("ol",{start:6},(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Save")," the changes you\u2019ve made one more time and ",(0,o.kt)("strong",{parentName:"li"},"Restart")," the NGINX balancer node.")),(0,o.kt)("div",{style:{display:"flex",justifyContent:"center",margin:"0 0 1rem 0"}},(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Locale Dropdown",src:n(80893).Z,width:"803",height:"143"}))),(0,o.kt)("ol",{start:7},(0,o.kt)("li",{parentName:"ol"},"Now when trying to ",(0,o.kt)("strong",{parentName:"li"},"Open")," your application ",(0,o.kt)("strong",{parentName:"li"},"in Browser"),", you (and any other client) will need to pass through the authentication window before accessing the application.")),(0,o.kt)("div",{style:{display:"flex",justifyContent:"center",margin:"0 0 1rem 0"}},(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Locale Dropdown",src:n(72957).Z,width:"386",height:"180"}))),(0,o.kt)("p",null,"After the appropriate credentials (i.e. the ones you\u2019ve generated the hash from) are specified, your application will be opened."),(0,o.kt)("h2",{id:"ip-address-deny"},"IP Address Deny"),(0,o.kt)("p",null,"If you suddenly notice some harm is caused to your application by a particular user, you can stop him by means of blocking any requests that are sent from that user\u2019s IP address and thereby deny your application access. This can be easily done by following the steps below."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Open the platform dashboard with your environment and click the ",(0,o.kt)("strong",{parentName:"li"},"Config")," button for the ",(0,o.kt)("strong",{parentName:"li"},"NGINX balancer")," node.")),(0,o.kt)("div",{style:{display:"flex",justifyContent:"center",margin:"0 0 1rem 0"}},(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Locale Dropdown",src:n(54620).Z,width:"801",height:"143"}))),(0,o.kt)("ol",{start:2},(0,o.kt)("li",{parentName:"ol"},"Click on the ",(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("em",{parentName:"strong"},"nginx-jelastic.conf"))," file in the ",(0,o.kt)("strong",{parentName:"li"},"conf")," folder within the opened ",(0,o.kt)("strong",{parentName:"li"},"Configuration Manager")," tab. Then find the location block inside the first server code section and paste the following line there:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"deny {IP_ADDRESS};\n")),(0,o.kt)("p",null,"where ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("em",{parentName:"strong"},"{IP_ADDRESS}"))," - obviously the address you want to block the ability to open your application for."),(0,o.kt)("div",{style:{display:"flex",justifyContent:"center",margin:"0 0 1rem 0"}},(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Locale Dropdown",src:n(91306).Z,width:"1197",height:"317"}))),(0,o.kt)("admonition",{title:"Notes",type:"tip"},(0,o.kt)("ul",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ul"},"You can also set this parameter value to all, which means that no one will be able to access your application. In this case, it might be useful to specify one more allow directive here, that is used to define the IP address (or range of addresses) you\u2019d like to grant the access for"),(0,o.kt)("li",{parentName:"ul"},"In case the above proposed simplified construction did not work for you (since this can be caused by specific configurations at a particular Platform), you can try the following one instead:")),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"if ($http_x_forwarded_for ~* {IP_ADDRESS}) {\n  return 403;\n}\n"))),(0,o.kt)("ol",{start:3},(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("strong",{parentName:"li"},"Save")," the changes and ",(0,o.kt)("strong",{parentName:"li"},"Restart")," your NGINX node using the appropriate buttons.")),(0,o.kt)("div",{style:{display:"flex",justifyContent:"center",margin:"0 0 1rem 0"}},(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Locale Dropdown",src:n(80893).Z,width:"803",height:"143"}))),(0,o.kt)("ol",{start:4},(0,o.kt)("li",{parentName:"ol"},"As a result, a user with the denied IP address will be faced the 403 Forbidden error while trying to access your application.")),(0,o.kt)("div",{style:{display:"flex",justifyContent:"center",margin:"0 0 1rem 0"}},(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Locale Dropdown",src:n(28608).Z,width:"649",height:"161"}))),(0,o.kt)("h2",{id:"methods-combination"},"Methods Combination"),(0,o.kt)("p",null,"To combine both restriction by IP address and authentication methods implementation, you\u2019ll need to use the ",(0,o.kt)("em",{parentName:"p"},(0,o.kt)("a",{parentName:"em",href:"https://cloudmydc.com/"},"satisfy"))," directive. By default (i.e. if not visibly declared in the configuration) it is set to ",(0,o.kt)("strong",{parentName:"p"},"all"),", which means that a user should meet both types of conditions to be granted access. If you specify this directive inside your configuration file and set its value to ",(0,o.kt)("strong",{parentName:"p"},"any"),", a user will be able to open the application if at least one condition is satisfied. Here is an example of such a configuration:"),(0,o.kt)("div",{style:{display:"flex",justifyContent:"center",margin:"0 0 1rem 0"}},(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Locale Dropdown",src:n(55618).Z,width:"1102",height:"274"}))),(0,o.kt)("p",null,"Thus, an unauthenticated user will be granted access if his IP address is listed among the allowed ones. Or, users with the denied IP addresses still will be able to access the website if they enter a valid username and password."),(0,o.kt)("p",null,"So, now you know a few basic ways to protect your app by granting the access permissions to the trusted users only, as well as denying it to the untrusted and possibly dangerous ones. Remember that spending some time on increasing your application\u2019s security now can save you a lot of time and money later and regardless, won\u2019t do any harm."))}h.isMDXComponent=!0},72957:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/auth-e6091b8b87e4d256949cef69d971d967.png"},38019:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/cloud-1a4c12c2698f4ef9cb3380151ba25e4a.png"},91306:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/conf-2-b8b018c3fcb45969b3a0c09031ddd34a.png"},55618:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/conf-3-f217fd267fd017b6a63fb4641a5ee53f.png"},40982:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/conf-173e8c980ea67b165817f988a1abc455.png"},54620:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/config-d849ba6fcc75b0bcd7997fe3d7b9e3a2.png"},94963:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/env-wiz-2376f3ab55cc34058d38925e243bed0e.png"},28608:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/forbidden-efd169146a830b11d10fff60d24784ba.png"},36694:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/new-file-5d335f7cd978099f9f52c11111218d81.png"},27334:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/passwords-fb46409d6a7d47e60bb14ec603305121.png"},80893:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/restart-a29bcbb90e5f3f5824267f4c32a6414a.png"}}]);